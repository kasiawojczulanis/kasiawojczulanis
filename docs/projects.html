<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>kasiawojczulanis - Projects</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="site_libs/d3-4.5.0/d3.min.js"></script>
<script src="site_libs/forceNetwork-binding-0.4/forceNetwork.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">kasiawojczulanis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./projects.html" rel="" target="" aria-current="page">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./teaching.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./miscellaneous.html" rel="" target="">
 <span class="menu-text">Miscellaneous</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#ongoing-projects" id="toc-ongoing-projects" class="nav-link active" data-scroll-target="#ongoing-projects">Ongoing projects</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Projects</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="ongoing-projects" class="level2">
<h2 class="anchored" data-anchor-id="ongoing-projects">Ongoing projects</h2>
<p>Interested in collaboration? Contact me: katarzyna.wojczulanis-jakubas@ug.edu.pl</p>
<p>Being interested in various topics and working with great people and different systems (<em>sensu</em> animal species, habitats, methodology - experiment vs obserations/field vs lab, etc), I am currently involved in quite a few different projects. Some of the projects are quite distinct and short term, with simple questions that once answered, they close the project on my side (at least temporarily, they may reopen in the future). Other projects are more complex and last longer. Here, an answer to one question raises another question, and a project goes on and on. Then, at certain point, projects get connected (see the network below) and a new line of research emerges. This is (thankfully) an endless process (at least at a human timeline scale;)</p>
<div class="cell">
<div class="cell-output-display">
<div class="forceNetwork html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-de7749b53951a1071378" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-de7749b53951a1071378">{"x":{"links":{"source":[10,10,10,10,10,10,13,13,13,13,13,13,13,13,13,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,15,15,15,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,11,11,11,11,1,1,1,14,14,14,14,14,6,6,6,6,16,16,16,3,3,5],"target":[12,4,15,0,8,2,7,15,1,14,6,16,3,5,9,4,15,0,0,8,11,1,14,6,16,3,5,2,15,0,0,8,11,1,14,16,3,5,2,0,0,11,1,2,8,1,14,6,16,5,2,8,11,1,14,6,3,5,11,14,6,16,3,5,9,6,3,5,2,6,16,2,6,16,3,5,9,16,3,5,9,3,5,9,5,9,9],"value":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"colour":["#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666"]},"nodes":{"name":["behaviour","colonial breeding","contagion","contaminants","females brood desertion","fintess concequences","foraging ecology","genetics","hormonal mechanisms","isotopes","mate choice","parent-offspring recognition","PARENTAL COORDINATION","population differntiation","response to climate changes","vocal display","wintering"],"group":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"nodesize":[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal(['#69b3a2'])","fontSize":14,"fontFamily":"serif","clickTextSize":35,"linkDistance":20,"linkWidth":"'1.5px'.toString()","charge":-900,"opacity":0.8,"zoom":true,"legend":false,"arrows":false,"nodesize":true,"radiusCalculation":"d.nodesize","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Each projects (usually) ends with a publication, so the list of those presents the complete list of so far asked research questions. Below is a short list of ongoing projects, and only those are listed that are somehow formally settled, having website and/or regular funding and/or a defined deadline for the project report. Other stuff may be described here in a future;)</p>
<section id="acord" class="level4">
<h4 class="anchored" data-anchor-id="acord"><strong>ACORD</strong></h4>
<p>PI: Katarzyna Wojczulanis-Jakubas: <strong>Avian COoRDination of parental activities - patterns and mechanisms</strong>. A new project that <a href="https://www.ncn.gov.pl/konkursy/wyniki/2023-11-23-opus25-preludium22">has just got the financial support from NCN</a>.</p>
<p>SUMMARY OF THE PROJECT: Parental care in birds has long been viewed in the context of sexual conflict, i.e.&nbsp;a tug-of-war between the parents, where each of the parent tries to maximize breeding success with the lowest possible cost on his/her side, even if that is to be achieved by overexploiting partner. Such interpretation, however, does not explain all observed patterns of parental care, especially coordinated performance of parental activates In fact, growing number of studies demonstrates that avian parents do coordinate their parental activity, and that coordination may positively affect the breeding outcome of the pair. It thus suggests that parents cooperation (apart from sexual conflict) may be an evolutionary power shaping parental care in birds. <strong>What are</strong> <strong>ecological drivers of parental coordination in birds</strong>, and <strong>what are proximate mechanisms regulating the coordination</strong> are now open and very exigent questions. The main aim of our project is to answer these questions<strong>.</strong> Wewill apply modern statistical techniques (meta-analyses) to examine possible ecological factors affecting patterns/level of parental coordination. We expect here, that of the most important ecological factors influencing parental coordination is food availability and predator pressure (with parents coordinating better in less favourable conditions, low food availability, high predator pressure). To examine proximate mechanisms of parental coordination, we will focus on a seabird species, the little auk and we will examine concentration of three hormones: corticosterone (CORT), prolactin (PRL), and mesotosin (MT), which concentration we will measure at various stages of little auk breeding. It is already well known that CORT and PRL play important role in regulation of parental efforts while oxytocin-like hormones (i.e.&nbsp;mesotocin) regulates strength of pair bond, thus we expect that the level of these hormones in both partners is related to their parental coordination. Examining these endocrine mechanisms in a seabird species will not only make the project tasks feasible (relatively big body size allowing for extensive blood sampling for hormones, the little auk parents already reported to coordinated the chick provisioning, etc) but will also allow to recognize true range and overall causality of the observed patterns of parental coordination in birds (most work is performed on small body-sized species). Finally, we will examine mechanistic of parental coordination across species. For that purpose we will utilize literature on a standard handicap experiment (a bird is treated in a way that distorts its behaviour, e.g.&nbsp;by clipping a flight feather), where we will analyse how the handicap of one partner affects parental performance of the other, and so the whole pair. We expect here that response of partner of the handicapped parent depends on the current level/pattern of the parental activity/pair bond, and we assume that this all can be considered as a proxy for prediction on parental coordination in given species. For example, if parental coordination is somehow conditional on partners performance, the handicap experiment should affect parental effort of the partner (decreasing it) and so the pair coordination. If parents coordination is fixed, however, the handicap should not change behaviour of untreated parent, etc. Owing to the <strong>broad and complex approach approach (</strong>meta-analyses and standard field methods - observations and experiments), the project promises to end up with a general model explaining parental coordination in birds, this way significantly <strong>expanding our knowledge on parental care in birds,</strong> and so <strong>developing evolutionary and behavioural ecology</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="opus25_fig1.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Examples of parental coordination in feeding visits at the nest with two most possible ecological drivers of the observed patterns – predation pressure and food availability. Interpretation: it is expected that: a) with a gradient of predation pressure in the environment, the pattern of nest visits of the two parents will be changing in a way to primarily reduce total number of visit in the nest; b) with a gradient of food availability, the pattern of nest visits of the two parents will be changing in a way to optimize the rate of food intake (of the offspring or the parents). The direction of the predation pressure and food availability gradient is denoted by shape and orientation of grey triangles. Strength of sexual selection (to be estimated based on life-history traits of the species) denoted with direction of the arrow and intensity of orange colour in the arrow.</figcaption>
</figure>
</div>
</section>
<section id="lapse" class="level4">
<h4 class="anchored" data-anchor-id="lapse"><strong>LAPSE</strong></h4>
<p>PI: Dariusz Jakubas (I am a co-worker here). <strong>What really matters for a High-Arctic zooplanktivorous seabird foraging in rapidly changing environment - prey size or energy content?</strong></p>
</section>
<section id="seatrack" class="level4">
<h4 class="anchored" data-anchor-id="seatrack"><strong>Seatrack</strong></h4>
<p>International network of scientist led by by a project-group with representatives from the Norwegian Polar Institute (NPI), Norwegian Institute for Nature Research (NINA) and Norwegian Environment Agency (NEA). The aim of the project is to map the non-breeding distribution of seabirds breeding in colonies encircling the North Atlantic. This is a large scale project (different seabirds species, over large geographical area) bringing truely breaking through results (many papers have been already published presenting detailed fidnings on specific scientific questions, some in <a href="#0">a special issue of Marine Ecology Progress Series</a>, and here is also the <a href="#0">awesome app</a> you can use to check non-breeding distribution of a species). The big step forward is done owing to the usage of small light-sensitive devices (geo-locators) deployed on birds. Based on those we can estimate birds position during the migration and wintering period (ten years ago we had no idea where these birds go for the winter!). Me with my reasearch group deliver data for the <strong>little auks from Hornsund</strong> (S Spitsbergen), where we perform a long-term studies on breeding ecology of the species. Recently, owing to the LAPSE project we also deployed loggers on birds in Magdalenefjorden (N Spitsbergen), to retrive them in the summer 2024.</p>
<p><img src="seatrack_fig1.jpg" class="img-fluid"></p>
</section>
<section id="arctox" class="level4">
<h4 class="anchored" data-anchor-id="arctox"><strong>Arctox</strong></h4>
<p>International network of scientist for examinig mercury contamination of N Altantic seabirds (I am a co-worker here)</p>
<p><strong>PHD project</strong> (Anna Osiecka, I am supervisor here): “Vocal behaviour and information coding in a pelagic Arctic seabird, the little auk (Alle alle)”</p>
<p><strong>PHD project</strong> (Kristin Piening, I am supervisor here): “Sex differences in foraging ecology of the little auk Alle alle”</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>